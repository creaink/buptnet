# Buptnet

## 介绍

`buptnet` ，方便北邮校园网登录的跨浏览器插件，基于 `Bootstrap3` 风格，主要采用 `jQuery` 和 `Highchart` 两个js库，主要功能有

- 多账号记录保存，多账号切换
- 打开浏览器或检测到登录页面，自动登录首选账号登录
- 剩余、使用流量占比可视化
- 动态校外流量速度曲线
- 账户网络、资费信息详情表格
- 流量余额提醒、流量倒计时
- 时段流量超额提醒、每日计划流量超额提醒
- 右键菜单使用bt搜索选中文字、bupt-portal一键登录
- 自动解析[北邮网络帐户自服务](http://netaccount.bupt.edu.cn/login)网络账单的IP地址为校内物理地址
- 支持chrome、Firefox、Edge等浏览器
> 注意：本插件未收集任何用户信息，用户账号和密码都是存于浏览器中，可以查看 manifest.json文件的 permissions 配置进行确认

![插件界面](https://i.loli.net/2019/01/17/5c40039949138.jpg)

## 快速导航

[chrome上安装](#chrome上安装) 、[Firefox上安装](#firefox上安装) 、[Edge上安装](#edge上安装) 、[国产浏览器上安装](#国产浏览器上安装)
[使用方法](#使用方法)

## 安装

### chrome上安装

#### 使用Google应用市场进行安装

1. buptnet已经上线官方Chrome商店，直接在Chrome应用市场搜索buptnet即可，或直接通过链接即可安装最新版本，[传送门](https://chrome.google.com/webstore/search/buptnet)

#### 使用安装文件进行安装(不推荐)

1. 下载最新的 [release](https://github.com/creaink/buptnet/releases) 版本的插件发布文件，即 `crx` 文件
2. 下载完毕后，双击下载的crx文件即可进行安装
3. 或者打开 chrome 内核浏览器的插件管理页面 (chrome://extensions/)，将crx文件拖放到该页面即可进行安装
4. 注意：版本较高的 chrome 浏览器会安装失败，这时候可以将 crx 文件当做压缩包解压，打开 chrome 的插件管理页面，勾选开发者模式，选择加载已解压的扩展程序，这时候选择已解压出来的文件夹即可

### firefox上安装

1. Firefox版插件已上架官方市场，在官方市场搜索buptnet，或直接通过链接即可安装最新版本，[传送门](https://addons.mozilla.org/addon/buptnet/)
2. 安装实验版本，首先clone dev实验版，然后在火狐浏览器地址栏中输入 `about:debugging` 并回车，勾选启用附加组件调试，之后点击临时载入附加组件，之后选实验版文件夹里面的配件文件manifest.json即可临时载入插件，重启浏览器后失效

### edge上安装

1. 打开Edge，在地址栏输入 `about:flags`，在开发者设置下面勾选启用开发人员扩展即
3. 下载并解压最新 [release](https://github.com/creaink/buptnet/releases) 版本里的zip文件，并解压生成
2. 点击浏览器工具栏上的“...”按钮，选择扩展, 点击加载扩展，选择刚刚我们解压生成的文件夹，加载好之后，点击本插件, 开启“在地址栏旁显示按钮”，之后即完成插件的安装
> 注意，Edge版本仅供测试

### 国产浏览器上安装

国产采基于 `chromium` 的大多数浏览器如：360极速、360安全、QQ浏览器、搜狗浏览器等
0. 首先尝试在[chrome商店](https://chrome.google.com/webstore/search/buptnet)进行尝试安装，如无法安装可按照下面步骤
1. 下载并解压最新 [release](https://github.com/creaink/buptnet/releases) 版本里的crx文件
2. 双击crx文件，此时基于 `chromium` 内核的默认浏览器，应该会跳出安装界面
3. 如果上述方式不能安装且浏览器支持插件扩展，可以自行搜索 xxx浏览器安装离线插件

## 使用方法及功能介绍

### 使用方法

- 点击插件图标会弹出界面，如果是登录界面则表明当前设备未登录校园网
- 插件的图标提供是否登录信息，绿色为已登录，灰色为未登录，状态需要点击插件或者后台运行自动更新
- 初次使需要在插件的基本页面注销一次登录，输入账号密码，然后在登录面板上点击**登录按钮旁的箭头**使用**登陆后首选当前账号**进行登录。登陆成功后，插件会将当前账号作为首选账号
- 登录面板总是自动填充首选账号，首选账号只能有一个，如需记录其他插件，登录时候选择**登录按钮旁的箭头**使用**登陆后记录当前账号**进行登录。登录成功后，会记录当前账号作为备选账号，备选账号数无限制

### 功能介绍

- `登录界面`
	- 点击插件，如弹出主视图界面可以点击注销，未登录则会跳转到登录界面进行账户的录入
	- 填完账户和密码后直接点击登录不会保存账户密码
	- 保存需要点击登录按钮内右侧的下拉箭头，根据提示可进行当前填写账号的管理，首选账号为默认填充账号、自动登录的账号，保存的账号可以在右侧的下拉列表进行切换
- `基本页面`里的转标签也可以将插件页面转为普通浏览器标签页，方便实时信息的查看和其他操作
- `实时界面`提供5秒段校外流量曲线图，双击空白区域清除图表，仅供测试参考，请不要常开此页面，以减轻学校网关压力
- `信息界面`里提供一些关于设备和账号的信息，其中账号名如果不是用本插件登录不准
- `功能界面`可以进行插件的一些功能的个性化设置
	- 自动登录，自动登录过程为，当设备接入校园网时触发默认浏览器打开时，或者用户自己打开浏览器时，插件会判断是否已经登录，如果未登录，插件将自动登录首选账号
	- 监听登录，监听登录过程为，在打开浏览器的情况下，插件后台检测监听到一个校园网登录标签的创建，插件监听到这个页面后进行对登录状态的判断，如果未登录则根据首选账号进行自动登录
	- 后台运行设置，开启后插件将后台运行，即插件将每隔15min对账号的流量使用情况进行监控，在输入框输入流量边界值，点击设置条目将边界值设置给相应条目，每个条目设置为零代表关闭该项的监控提醒
		- 余量：当您剩余流量少于此值的时候，将会在浏览器内弹出提醒框，并在插件图标上显示剩余流量(单位G)
		- 段量：当您15min的间隔使用的流量超过此值时，将会在浏览器内弹出提醒框
		- 日量：您可以计划安排好每日使用流量，设置此值后，如果流量累计计算超出预设计算值，将会在浏览器内弹出提醒框
- `关于界面`里面提供一些常用导航和插件运行环境、作者信息
- `搜索bt`，使用本功能需要保证插浏览器保存登录过byr bt站，在网页上左键选中一段文字如"*黑暗骑士*"，右击菜单会出现"使用bt搜索黑暗骑士"的菜单项，点击该项会跳转bt的黑暗骑士搜索返回界面

## 赞助我们

如果您认为本插件好用，提高了校园网的体验水平，不妨小额赞助我们一下, 支付宝扫一扫以支持我们的后续开发

![donate](/img/donate.gif "支付宝扫一扫")